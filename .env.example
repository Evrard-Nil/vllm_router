# ============================================================================
# vLLM Router Environment Configuration
# ============================================================================
# This is the example configuration file for the vLLM Router.
# Copy this file to .env and modify the values as needed.
#
# IMPORTANT: Environment variables are the ONLY supported configuration method.
# YAML configuration files are no longer supported.
# ============================================================================

# ============================================================================
# SERVER CONFIGURATION (Required)
# ============================================================================
# The host address the router will bind to
ROUTER_HOST=0.0.0.0

# The port the router will listen on
ROUTER_PORT=8001

# Logging level (critical, error, warning, info, debug, trace)
ROUTER_LOG_LEVEL=info


# ============================================================================
# BACKEND CONFIGURATION (Required - choose ONE option)
# ============================================================================
# Option 1: Simple backend list (most common)
# Comma-separated list of backend URLs
BACKENDS=http://backend1:8000,http://backend2:8000

# Option 2: Separate vLLM and Router backends (advanced)
# Use this if you need to distinguish between vLLM backends and router-to-router backends
# VLLM_BACKENDS=http://vllm1:8000,http://vllm2:8000
# ROUTER_BACKENDS=http://router1:8001,http://router2:8001


# ============================================================================
# ROUTING CONFIGURATION (Required)
# ============================================================================
# Routing algorithm to use
# Options: roundrobin, session, kvaware, prefixaware, disaggregated_prefill
ROUTING_LOGIC=roundrobin

# Session key for session-based routing (required only when ROUTING_LOGIC=session)
# SESSION_KEY=X-Session-ID


# ============================================================================
# HEALTH CHECK & DISCOVERY SETTINGS (Optional)
# ============================================================================
# Interval in seconds between health checks
REFRESH_INTERVAL=30

# Timeout in seconds for health check requests
HEALTH_CHECK_TIMEOUT_SECONDS=10

# Timeout in seconds for backend type detection
BACKEND_DETECTION_TIMEOUT=10


# ============================================================================
# ROUTING ADVANCED SETTINGS (Optional)
# ============================================================================
# Maximum number of router hops allowed (prevents infinite loops)
MAX_ROUTER_HOPS=3

# Custom callback handler (format: module_path:instance_name)
# Example: CALLBACKS=my_callbacks:callback_handler
# CALLBACKS=


# ============================================================================
# MONITORING & LOGGING (Optional)
# ============================================================================
# Enable periodic statistics logging
LOG_STATS=false

# Interval in seconds between statistics logs
LOG_STATS_INTERVAL=10


# ============================================================================
# FEATURE GATES (Optional)
# ============================================================================
# Comma-separated list of experimental features to enable
# Example: FEATURE_GATES=SemanticCache=true,FeatureX=true
FEATURE_GATES=


# ============================================================================
# SEMANTIC CACHE (Optional - Experimental)
# ============================================================================
# Requires FEATURE_GATES=SemanticCache=true to be enabled

# Embedding model for semantic similarity
# Example: sentence-transformers/all-MiniLM-L6-v2
# SEMANTIC_CACHE_MODEL=

# Directory to store semantic cache data
# SEMANTIC_CACHE_DIR=/app/semantic_cache

# Similarity threshold for cache hits (0.0 to 1.0)
# SEMANTIC_CACHE_THRESHOLD=0.8


# ============================================================================
# AUTHENTICATION (Optional but Recommended for Production)
# ============================================================================
# Admin token for backend management endpoints
# Generate a strong random token: openssl rand -hex 32
# ADMIN_TOKEN=your-secret-admin-token-here

# User token for API endpoints
# Generate a strong random token: openssl rand -hex 32
# USER_TOKEN=your-secret-user-token-here

# Require authentication in production (fail if tokens not configured)
# Set to "true" in production environments
# REQUIRE_AUTH=false


# ============================================================================
# DOMAIN REGISTRATION (Optional - For TLS/SSL Certificates)
# ============================================================================
# Enable automatic domain registration and certificate management
# DOMAIN_REGISTRATION_ENABLED=false

# Email for Let's Encrypt certificate notifications
# CERTBOT_EMAIL=your-email@example.com

# Static IP address of this server
# STATIC_IP=203.0.113.10

# Cloudflare API token for DNS challenges
# CLOUDFLARE_API_TOKEN=your-cloudflare-api-token

# Cloudflare Zone ID (optional, improves performance)
# CLOUDFLARE_ZONE_ID=your-zone-id

# Comma-separated list of domains to manage
# DOMAINS=example.com,*.example.com,api.example.com

# Automatically renew certificates before expiration
# DOMAIN_REGISTRATION_AUTO_RENEW=true

# Days before expiration to trigger renewal
# DOMAIN_REGISTRATION_RENEWAL_THRESHOLD_DAYS=30

# Directory to store attestation evidence
# DOMAIN_REGISTRATION_EVIDENCE_DIR=/evidences

# Directory where Let's Encrypt stores certificates
# DOMAIN_REGISTRATION_CERTIFICATE_DIR=/etc/letsencrypt/live

# Enable TLS attestation for certificate verification
# DOMAIN_REGISTRATION_ATTESTATION_ENABLED=true


# ============================================================================
# DOCKER/CONTAINER ENVIRONMENT (Optional)
# ============================================================================
# Environment name for logging/monitoring (e.g., production, staging, dev)
# ENV=production

# Host IP address for logging/monitoring
# HOST_IP=203.0.113.10


# ============================================================================
# BATCH PROCESSING (Advanced - Usually Auto-configured)
# ============================================================================
# Batch processing is automatically configured based on backend capabilities
# No environment variables needed for basic operation


# ============================================================================
# QUICK START EXAMPLES
# ============================================================================
#
# Example 1: Minimal Development Setup
# -------------------------------------
# ROUTER_HOST=0.0.0.0
# ROUTER_PORT=8001
# BACKENDS=http://localhost:8000
# ROUTING_LOGIC=roundrobin
#
# Example 2: Production with Authentication
# ------------------------------------------
# ROUTER_HOST=0.0.0.0
# ROUTER_PORT=8001
# BACKENDS=http://backend1:8000,http://backend2:8000,http://backend3:8000
# ROUTING_LOGIC=kvaware
# ADMIN_TOKEN=<generate-with: openssl rand -hex 32>
# USER_TOKEN=<generate-with: openssl rand -hex 32>
# REQUIRE_AUTH=true
# LOG_STATS=true
# REFRESH_INTERVAL=30
#
# Example 3: Production with Domain Registration
# -----------------------------------------------
# ROUTER_HOST=0.0.0.0
# ROUTER_PORT=8001
# BACKENDS=http://backend1:8000,http://backend2:8000
# ROUTING_LOGIC=kvaware
# ADMIN_TOKEN=<your-token>
# USER_TOKEN=<your-token>
# REQUIRE_AUTH=true
# DOMAIN_REGISTRATION_ENABLED=true
# CERTBOT_EMAIL=admin@example.com
# STATIC_IP=203.0.113.10
# CLOUDFLARE_API_TOKEN=<your-token>
# DOMAINS=api.example.com,*.api.example.com
#
# ============================================================================
